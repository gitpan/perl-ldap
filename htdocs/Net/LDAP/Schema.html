<HTML>
<HEAD>
<TITLE>Net::LDAP::Schema - Load and manipulate an LDAP v3 Schema</TITLE>
<LINK REV="made" HREF="mailto:hackers@FreeBSD.org">
</HEAD>

<BODY>

<!-- INDEX BEGIN -->
<!--

<UL>

	<LI><A HREF="#NAME">NAME</A>
	<LI><A HREF="#SYNOPSIS">SYNOPSIS</A>
	<LI><A HREF="#DESCRIPTION">DESCRIPTION</A>
	<LI><A HREF="#METHODS">METHODS</A>
	<LI><A HREF="#SEE_ALSO">SEE ALSO</A>
	<LI><A HREF="#AUTHORS">AUTHORS</A>
	<LI><A HREF="#COPYRIGHT">COPYRIGHT</A>
</UL>
-->
<!-- INDEX END -->

<P>
<H1><A NAME="NAME">NAME</A></H1>
<P>
Net::LDAP::Schema - Load and manipulate an LDAP v3 Schema

<P>
<HR>
<H1><A NAME="SYNOPSIS">SYNOPSIS</A></H1>
<P>
<PRE> use Net::LDAP;
 use Net::LDAP::Schema;
</PRE>
<P>
<PRE> #
 # Read schema from server
 #
 $ldap = Net::LDAP-&gt;new( $server );
 $ldap-&gt;bind();
 $schema = $ldap-&gt;schema();
</PRE>
<P>
<PRE> #
 # Load from LDIF
 #
 $schema = Net::LDAP::Schema-&gt;new;
 $schema-&gt;parse( &quot;schema.ldif&quot; ) or die $schema-&gt;error;
</PRE>
<P>
<HR>
<H1><A NAME="DESCRIPTION">DESCRIPTION</A></H1>
<P>
<STRONG>Net::LDAP::Schema</STRONG> provides a means to load an LDAP schema and query it for information
regarding supported objectclasses, attributes and syntaxes.

<P>
<HR>
<H1><A NAME="METHODS">METHODS</A></H1>
<P>
Where a method is stated as taking the 'name or oid' of a schema item
(which may be an object class, attribute or syntax) then a case-insensitive
name or raw oid (object identifier, in dotted numeric string form, e.g.
2.5.4.0) may be supplied.

<DL>
<DT><STRONG><A NAME="item_attributes">attributes</A></STRONG><DD>
<P>
With no arguments, returns a list of the names all attributes in the
schema.

<P>
<PRE>  @atts = $schema-&gt;attributes();
</PRE>
<P>
If called with an argument which is the name or oid of a known object
class, returns a list of the attributes which may (or must) be present in
the OC.

<P>
<PRE>  @person_atts = $schema-&gt;attributes( &quot;person&quot; );
</PRE>
<P>
Return value is an array or array reference depending on calling context,
or empty list on error.

<DT><STRONG><A NAME="item_ditstructurerules">ditstructurerules</A></STRONG><DD>
<P>
Returns a list of the names of all ditstructurerules in the schema.

<P>
<PRE>  @dts = $schema-&gt;ditstructurerules();
</PRE>
<P>
Return value is an array or array reference depending on calling context.

<DT><STRONG><A NAME="item_ditcontentrules">ditcontentrules</A></STRONG><DD>
<P>
Returns a list of the names of all ditcontentrules in the schema.

<P>
<PRE>  @dtc = $schema-&gt;ditcontentrules();
</PRE>
<P>
Return value is an array or array reference depending on calling context.

<DT><STRONG><A NAME="item_dump">dump</A></STRONG><DD>
<P>
Given an argument which is the name of a file, and the file or directory
has write permission, will dump the raw schema information to a file. If no
argument is given the raw schema information is dumped to standard out.

<P>
<PRE>  $result = $schema-&gt;dump( &quot;./schema.dump&quot; );
</PRE>
<P>
<PRE>  or
</PRE>
<P>
<PRE>  $result = $schema-&gt;dump();
</PRE>
<P>
If no schema data is returned from directory server, the method will return
undefined. Otherwise a value of 1 is always returned.

<DT><STRONG><A NAME="item_error">error</A></STRONG><DD>
<P>
Returns the last error encountered.

<DT><STRONG><A NAME="item_is_objectclass">is_objectclass, is_attribute, is_syntax, is_matchingrule</A></STRONG><DD>
<P>
Given the name or oid of a schema item (object class, attribute, syntax or
matchingrule respectively) returns the assoicated OID or undef if the name
or oid is not of the appropriate type.

<P>
<PRE>  # Is foo a known OC?
  $oid = $schema-&gt;is_objectclass( &quot;foo&quot; );
  # No? Bale out.
  die( &quot;Not an objectclass&quot; ) unless $oid;
  # Yes...so we can do this
  @must = $schema-&gt;must( $oid );
</PRE>
<DT><STRONG><A NAME="item_is_matchingruleuse">is_matchingruleuse, is_ditstructurerule, is_ditcontentrule, is_nameform</A></STRONG><DD>
<P>
Given the name or oid of a schema item (matchingruleuse, ditstructurerule,
ditcontentrule or nameform respectively) returns the assoicated OID or
undef if the name or oid is not of the appropriate type.

<P>
<PRE>  # Is foo a known OC?
  $oid = $schema-&gt;is_nameform( &quot;foo&quot; );
  # No? Bale out.
  die( &quot;Not a nameform&quot; ) unless $oid;
</PRE>
<DT><STRONG><A NAME="item_item">item</A></STRONG><DD>
<P>
Given two arguments, first of which is the name or oid of a known object
class or attribute and second of which is the name of the item, returns the
item's data value. The item's value may be undefined.

<P>
<PRE>  @item = $schema-&gt;item( $oid, &quot;desc&quot; );
</PRE>
<P>
Return value is an array or a value depending on calling context.

<P>
If the first argument is a name and there is more than one item in the
schema with that name then undef, or the empty list, will be returned.

<DT><STRONG><A NAME="item_items">items</A></STRONG><DD>
<P>
Given an argument which is the name or oid of a known object class or
attribute, returns the items available for this attribute or object class.
The returned item name may have an undefined value.

<P>
<PRE>  @items = $schema-&gt;items( $oid );
</PRE>
<P>
Return value is a list or array reference depending on calling context.

<P>
If the argument given is a name and there is more than one item in the
schema with that name then undef, or the empty list, will be returned.

<DT><STRONG><A NAME="item_matchingrules">matchingrules</A></STRONG><DD>
<P>
Returns a list of the names of all matchingrules in the schema.

<P>
<PRE>  @mrs = $schema-&gt;matchingrules();
</PRE>
<P>
Return value is an array or array reference depending on calling context.

<DT><STRONG><A NAME="item_matchingruleuse">matchingruleuse</A></STRONG><DD>
<P>
Returns a list of the names of all matchingruleuse in the schema.

<P>
<PRE>  @mru = $schema-&gt;matchingruleuse();
</PRE>
<P>
Return value is an array or array reference depending on calling context.

<DT><STRONG><A NAME="item_may">may</A></STRONG><DD>
<P>
Given an argument which is the name or oid of a known object class, returns
the name of the attributes which are optional in the class.

<P>
<PRE>  @may = $schema-&gt;may( $oc );
</PRE>
<P>
Return value is an array or array reference depending on calling context.

<DT><STRONG><A NAME="item_must">must</A></STRONG><DD>
<P>
Given an argument which is the name or oid of a known object class, returns
the name of the attributes which are mandatory in the class

<P>
<PRE>  @must = $schema-&gt;must( $oc );
</PRE>
<P>
Return value is an array or array reference depending on calling context.

<DT><STRONG><A NAME="item_name">name</A></STRONG><DD>
<P>
Given an argument which is the name or oid of an item, returns the items
canonical name or undef if the name or oid is not known.

<P>
If the argument given is a name and there is more than one item in the
schema with that name then undef will be returned.

<DT><STRONG><A NAME="item_name2oid">name2oid</A></STRONG><DD>
<P>
Given the name of a schema item (object class, attribute or syntax) returns
the assoicated OID or undef if it is not recognised.

<P>
It is possible that two objects, of different types, have the same name. In
this case <A HREF="#item_name2oid">name2oid</A> will return a list of OIDs in an array context. In a scalar context it will
return undef if there is more than one object with the given name.

<DT><STRONG><A NAME="item_nameforms">nameforms</A></STRONG><DD>
<P>
Returns a list of the names of all nameforms in the schema.

<P>
<PRE>  @nfm = $schema-&gt;nameforms();
</PRE>
<P>
Return value is an array or array reference depending on calling context.

<DT><STRONG><A NAME="item_objectclasses">objectclasses</A></STRONG><DD>
<P>
Returns a list of the names of all objectclasses in the schema.

<P>
<PRE>  @ocs = $schema-&gt;objectclasses();
</PRE>
<P>
Return value is an array or array reference depending on calling context.

<DT><STRONG><A NAME="item_parse">parse</A></STRONG><DD>
<P>
Takes a single argument which can be any of, A message objected returned
from an LDAP search, a Net::LDAP::Entry object or the name of a file
containing an LDIF form of the schema.

<P>
If the argument is a message result from a search, Net::LDAP::Schema will
parse the schema from the first entry returned.

<P>
Returns true on success and <CODE>undef</CODE> on error.

<DT><STRONG><A NAME="item_superclass">superclass</A></STRONG><DD>
<P>
Given an argument which is the name or oid of a known objectclass, returns
the list of names of the immediate superclasses.

<DT><STRONG><A NAME="item_syntax">syntax</A></STRONG><DD>
<P>
Given an argument which is the name or oid of a known attribute, returns
the name of the attribute's syntax (or the syntax of the attributes
superior if the syntax is inherited).

<P>
<PRE>  $name_syntax = $schema-&gt;syntax( &quot;commonName&quot; );
</PRE>
<DT><STRONG><A NAME="item_syntaxes">syntaxes</A></STRONG><DD>
<P>
Returns a list of the names of all ldapSyntaxes in the schema. (The name of
a syntax is not well defined. It may be an OID or abbreviated description).

<P>
<PRE>  @syns = $schema-&gt;syntaxes();
</PRE>
<P>
Return value is an array or array reference depending on calling context.

</DL>
<P>
<HR>
<H1><A NAME="SEE_ALSO">SEE ALSO</A></H1>
<P>
<A HREF="../../Net/LDAP|Net/LDAP.html">Net::LDAP|Net::LDAP</A>,
<A HREF="../../Other online documentation|Net/LDAP/RFC.html">Other online documentation|Net::LDAP::RFC</A>



<P>
<HR>
<H1><A NAME="AUTHORS">AUTHORS</A></H1>
<P>
Graham Barr &lt;<A HREF="mailto:gbarr@pobox.com">gbarr@pobox.com</A>&gt;
John Berthels &lt;<A HREF="mailto:jjb@nexor.co.uk">jjb@nexor.co.uk</A>&gt;

<P>
Please report any bugs, or post any suggestions, to the perl-ldap mailing
list &lt;<A
HREF="mailto:perl-ldap-dev@lists.sourceforge.net">perl-ldap-dev@lists.sourceforge.net</A>&gt;


<P>
<HR>
<H1><A NAME="COPYRIGHT">COPYRIGHT</A></H1>
<P>
Copyright (c) 1998-2000 Graham Barr. All rights reserved. This program is
free software; you can redistribute it and/or modify it under the same
terms as Perl itself.

<hr>

<P>
<EM>$Id: Schema.pod,v 1.9 2001/06/11 16:49:04 gbarr Exp $</EM>



</BODY>

</HTML>
