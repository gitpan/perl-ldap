<HTML>
<HEAD>
<TITLE>Net::LDAP::Entry - An LDAP entry object</TITLE>
<LINK REV="made" HREF="mailto:hackers@FreeBSD.org">
</HEAD>

<BODY>

<!-- INDEX BEGIN -->
<!--

<UL>

	<LI><A HREF="#NAME">NAME</A>
	<LI><A HREF="#SYNOPSIS">SYNOPSIS</A>
	<LI><A HREF="#DESCRIPTION">DESCRIPTION</A>
	<LI><A HREF="#CONSTRUCTOR">CONSTRUCTOR</A>
	<LI><A HREF="#METHODS">METHODS</A>
	<LI><A HREF="#SEE_ALSO">SEE ALSO</A>
	<LI><A HREF="#AUTHOR">AUTHOR</A>
	<LI><A HREF="#COPYRIGHT">COPYRIGHT</A>
</UL>
-->
<!-- INDEX END -->

<P>
<H1><A NAME="NAME">NAME</A></H1>
<P>
Net::LDAP::Entry - An LDAP entry object

<P>
<HR>
<H1><A NAME="SYNOPSIS">SYNOPSIS</A></H1>
<P>
<PRE>  use Net::LDAP;
</PRE>
<P>
<PRE>  $ldap = Net::LDAP-&gt;new($host);
  $mesg = $ldap-&gt;search(@search_args);
</PRE>
<P>
<PRE>  my $max = $mesg-&gt;count;
  for($i = 0 ; $i &lt; $max ; $i++) {
    my $entry = $mesg-&gt;entry($i);
    foreach my $attr ($entry-&gt;attributes) {
      print join(&quot;\n &quot;,$attr, $entry-&gt;get_value($attr)),&quot;\n&quot;;
    }
  }
</PRE>
<P>
<PRE>  # or
</PRE>
<P>
<PRE>  use Net::LDAP::Entry;
  
  $entry = Net::LDAP::Entry-&gt;new;
  
  $entry-&gt;add(
    attr1 =&gt; 'value1',
    attr2 =&gt; [qw(value1 value2)]
  );
  
  $entry-&gt;delete( 'unwanted' );
  
  $entry-&gt;replace(
    attr1 =&gt; 'newvalue'
    attr2 =&gt; [qw(new values)]
  );
  
  $entry-&gt;update( $ldap ); # update directory server
</PRE>
<P>
<HR>
<H1><A NAME="DESCRIPTION">DESCRIPTION</A></H1>
<P>
The <STRONG>Net::LDAP::Entry</STRONG> object represents a single entry in the directory. It is a container for
attribute-value pairs.

<P>
A <STRONG>Net::LDAP::Entry</STRONG> object can be used in two situations. The first and probably most common
use is in the result of a search to the directory server.

<P>
The other is where a new object is created locally and then a single
command is sent to the directory server to add, modify or replace an entry.
Entries for this purpose can also be created by reading an LDIF file with
the <A HREF="../../Net/LDAP/LDIF.html">Net::LDAP::LDIF</A> module.

<P>
<HR>
<H1><A NAME="CONSTRUCTOR">CONSTRUCTOR</A></H1>
<DL>
<DT><STRONG><A NAME="item_new">new</A></STRONG><DD>
<P>
Create a new entry object with the changetype set to <A HREF="#item__add_">'add'</A>



</DL>
<P>
<HR>
<H1><A NAME="METHODS">METHODS</A></H1>
<DL>
<DT><STRONG><A NAME="item_add">add ( ATTR =&gt; VALUE [, ATTR2 =&gt; VALUE2 ... ] )</A></STRONG><DD>
<P>
Add one or more new attributes to the entry. Each value must be a scalar
variable or a reference to an array. The values given will be added to the
values which already exist for the given attributes.

<P>
<PRE>  $entry-&gt;add( 'sn' =&gt; 'Barr');
</PRE>
<P>
<PRE>  $entry-&gt;add( 'street' =&gt; [ '1 some road','nowhere']);
</PRE>
<P>
<STRONG>NOTE</STRONG>: these changes are local to the client and will not appear on the
directory server until the <A HREF="#item_update">update</A> method is called.

<DT><STRONG><A NAME="item_attributes">attributes ( [ OPTIONS ] )</A></STRONG><DD>
<P>
Return a list of attributes that this entry has.

<P>
OPTIONS is a list of name/value pairs, valid options are :-

<DL>
<DT><STRONG><A NAME="item_nooptions">nooptions</A></STRONG><DD>
<P>
If TRUE, return a list of the attribute names excluding any options. For
example for the entry

<P>
<PRE>  name: Graham Barr
  name;en-us: Bob
  jpeg;binary: **binary data**
</PRE>
<P>
then

<P>
<PRE>  @values = $entry-&gt;attributes()
  print &quot;default: @values\n&quot;;
</PRE>
<P>
<PRE>  @values = $entry-&gt;attributes( nooptions =&gt; 1);
  print &quot;nooptions: @values\n&quot;;
</PRE>
<P>
will output

<P>
<PRE>  default: name name;en-us jpeg;binary
  nooptions: name jpeg
</PRE>
</DL>
<DT><STRONG><A NAME="item_changetype">changetype ( [ TYPE ] )</A></STRONG><DD>
<P>
If called without arguments it returns the type of operation that would be
performed when the update method is called. If called with an argument it
will set the changetype to TYPE.

<P>
Possible values for TYPE are

<DL>
<DT><STRONG>add</STRONG><DD>
<P>
The update method will call the add method on the client object, which will
result in the entry being added to the directory server.

<DT><STRONG><A NAME="item_delete">delete</A></STRONG><DD>
<P>
The update method will call the delete method on the client object, which
will result in the entry being removed from the directory server.

<DT><STRONG><A NAME="item_modify">modify</A></STRONG><DD>
<P>
The update method will call the modify method on the client object, which
will result in any changes that have been made locally being made to the
entry on the directory server.

<DT><STRONG><A NAME="item_moddn">moddn/modrdn</A></STRONG><DD>
<P>
The update method will call the moddn method on the client object, which
will result in any DN changes that have been made locally being made to the
entry on the directory server. These DN changes are specified by setting
the entry attributes newrdn, deleteoldrdn, and (optionally) newsuperior.

</DL>
<DT><STRONG>delete ( [ ATTR [, ATTR2 ... ]] )</STRONG><DD>
<P>
Delete the given attributes from the entry. If no attributes are passed
then the next call to update will cause the entry to be deleted from the
server.

<P>
<STRONG>NOTE</STRONG>: these changes are local to the client and will not appear on the
directory server until the <A HREF="#item_update">update</A> method is called.

<DT><STRONG><A NAME="item_dn">dn ( [ DN ] )</A></STRONG><DD>
<P>
Set or get the DN for the entry. With no arguments <A HREF="#item_dn">dn</A> will return the current DN. If an argument is given then it will change the
DN for the entry and return the previous value.

<P>
<STRONG>NOTE</STRONG>: these changes are local to the client and will not appear on the
directory server until the <A HREF="#item_update">update</A> method is called.

<DT><STRONG><A NAME="item_exists">exists ( ATTR )</A></STRONG><DD>
<P>
Returns TRUE if the entry has an attribute called ATTR.

<DT><STRONG><A NAME="item_get_value">get_value ( ATTR [, OPTIONS ] )</A></STRONG><DD>
<P>
Get the values for the attribute ATTR. In a list context returns all values
for the given attribute, or the empty list if the attribute does not exist.
In a scalar context returns the first value for the attribute or undef if
the attribute does not exist.

<P>
The return value may be changed by OPTIONS, which is a list of name =&gt;
value pairs, valid options are :-

<DL>
<DT><STRONG><A NAME="item_alloptions">alloptions</A></STRONG><DD>
<P>
If TRUE then the result will be a hash reference. The keys of the hash will
be the options and the hash value will be the values for those attributes.
For example if an entry had

<P>
<PRE>  name: Graham Barr
  name;en-us: Bob
</PRE>
<P>
Then a get for attribute ``name'' with alloptions set to a true value

<P>
<PRE>  $ref = $entry-&gt;get_value( 'name', alloptions =&gt; 1);
</PRE>
<P>
will return a hash reference that would be like

<P>
<PRE>  {
    ''       =&gt; [ 'Graham Barr' ],
    ';en-us' =&gt; [ 'Bob' ]
  }
</PRE>
<DT><STRONG><A NAME="item_asref">asref</A></STRONG><DD>
<P>
If TRUE then the result will be a reference to an array containing all the
values for the attribute, or undef if the attribute does not exist.

<P>
<PRE>  $scalar = $entry-&gt;get_value('name');
  
$scalar will be the first value for the C&lt;name&gt; attribute, or C&lt;undef&gt; if the
entry does not contain a C&lt;name&gt; attribute.
</PRE>
<P>
<PRE>  $ref    = $entry-&gt;get_value('name', asref =&gt; 1);
</PRE>
<P>
<CODE>$ref</CODE> will be a reference to an array, which will have all the
values for the <CODE>name</CODE> attribute. If the entry does not have an attribute called <CODE>name</CODE>
then <CODE>$ref</CODE> will be <CODE>undef</CODE>



</DL>
<P>
<STRONG>NOTE</STRONG>: In the interest of performance the array references returned by <A HREF="#item_get_value">get_value</A>
are references to structures held inside the entry object. These values and
thier contents should <STRONG>NOT</STRONG> be modified directly.

<DT><STRONG><A NAME="item_replace">replace ( ATTR =&gt; VALUE [, ATTR2 =&gt; VALUE2 ... ] )</A></STRONG><DD>
<P>
Similar to add, except that the values given will replace any values that
already exist for the given attributes.

<P>
<STRONG>NOTE</STRONG>: these changes are local to the client and will not appear on the
directory server until the <A HREF="#item_update">update</A> method is called.

<DT><STRONG><A NAME="item_update">update ( CLIENT )</A></STRONG><DD>
<P>
Update the directory server with any changes that have been made locally to
the attributes of this entry. This means any calls that have been made to
add, replace or delete since the last call to changetype or update was
made.

<P>
This method can also be used to modify the DN of the entry on the server,
by specifying moddn or modrdn as the changetype, and setting the entry
attributes newrdn, deleteoldrdn, and (optionally) newsuperior.

<P>
CLIENT is a <CODE>Net::LDAP</CODE> object where the update will be sent to.

<P>
The result will be an object of type
<A HREF="../../Net/LDAP/Message.html">Net::LDAP::Message</A> as returned by the add, modify or delete method called on CLIENT.

</DL>
<P>
<HR>
<H1><A NAME="SEE_ALSO">SEE ALSO</A></H1>
<P>
<A HREF="../../Net/LDAP.html">Net::LDAP</A>,
<A HREF="../../Net/LDAP/LDIF.html">Net::LDAP::LDIF</A>



<P>
<HR>
<H1><A NAME="AUTHOR">AUTHOR</A></H1>
<P>
Graham Barr &lt;<A HREF="mailto:gbarr@pobox.com">gbarr@pobox.com</A>&gt;

<P>
Please report any bugs, or post any suggestions, to the perl-ldap mailing
list &lt;<A
HREF="mailto:perl-ldap-dev@lists.sourceforge.net">perl-ldap-dev@lists.sourceforge.net</A>&gt;


<P>
<HR>
<H1><A NAME="COPYRIGHT">COPYRIGHT</A></H1>
<P>
Copyright (c) 1997-2000 Graham Barr. All rights reserved. This program is
free software; you can redistribute it and/or modify it under the same
terms as Perl itself.

<hr>

<P>
<EM>$Id: Entry.pod,v 1.8 2001/10/05 14:36:00 gbarr Exp $</EM>



</BODY>

</HTML>
