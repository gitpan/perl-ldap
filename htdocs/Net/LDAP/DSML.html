<HTML>
<HEAD>
<TITLE>Net::LDAP::DSML -- A DSML Writer and Reader for Net::LDAP</TITLE>
<LINK REV="made" HREF="mailto:hackers@FreeBSD.org">
</HEAD>

<BODY>

<!-- INDEX BEGIN -->
<!--

<UL>

	<LI><A HREF="#NAME">NAME</A>
	<LI><A HREF="#SYNOPSIS">SYNOPSIS</A>
	<LI><A HREF="#DESCRIPTION">DESCRIPTION</A>
	<LI><A HREF="#AUTHOR">AUTHOR</A>
	<LI><A HREF="#SEE_ALSO">SEE ALSO</A>
	<LI><A HREF="#COPYRIGHT">COPYRIGHT</A>
</UL>
-->
<!-- INDEX END -->

<P>
<H1><A NAME="NAME">NAME</A></H1>
<P>
Net::LDAP::DSML -- A DSML Writer and Reader for Net::LDAP

<P>
<HR>
<H1><A NAME="SYNOPSIS">SYNOPSIS</A></H1>
<P>
<PRE> use Net::LDAP;
 use Net::LDAP::DSML;
 use IO::File;
</PRE>
<P>
<PRE> my $server = &quot;localhost&quot;;
 my $file = &quot;testdsml.xml&quot;;
 my $ldap = Net::LDAP-&gt;new($server);
 
 $ldap-&gt;bind();
</PRE>
<P>
<PRE> my $dsml = Net::LDAP::DSML-&gt;new();
</PRE>
<P>
<PRE> my $file = &quot;testdsml.xml&quot;;
</PRE>
<P>
<PRE> my $io = IO::File-&gt;new($file,&quot;w&quot;) or die (&quot;failed to open $file as filehandle.$!\n&quot;);
 $dsml-&gt;open($io) or die (&quot;DSML problems opening $file.$!\n&quot;); ;
</PRE>
<P>
<PRE> #or
</PRE>
<P>
<PRE> open (IO,&quot;&gt;$file&quot;) or die(&quot;failed to open $file.$!&quot;);
</PRE>
<P>
<PRE> $dsml-&gt;open(*IO) or die (&quot;DSML problems opening $file.$!\n&quot;);
</PRE>
<P>
<PRE>  my $mesg = $ldap-&gt;search(
                           base     =&gt; 'o=airius.com',
                           scope    =&gt; 'sub',
                           filter   =&gt; 'ou=accounting',
                           callback =&gt; sub {
                                         my ($mesg,$entry) =@_;
                                         $dsml-&gt;write($entry) if (ref $entry eq 'Net::LDAP::Entry');
                                       }
                            );  
</PRE>
<P>
<PRE> die (&quot;search failed with &quot;,$mesg-&gt;code(),&quot;\n&quot;) if $mesg-&gt;code();
</PRE>
<P>
<PRE> $dsml-&gt;write($schema);
 $dsml-&gt;finish();
</PRE>
<P>
<PRE> print &quot;Finished printing DSML\n&quot;;
 print &quot;Starting to process DSML\n&quot;;
</PRE>
<P>
<PRE> $dsml = new Net::LDAP::DSML();
 $dsml-&gt;process($file, entry =&gt; \&amp;processEntry);
</PRE>
<P>
<PRE> #future when schema support is available will be
 #$dsml-&gt;process($file, entry =&gt; \&amp;processEntry, schema =&gt; \&amp;processSchema);
</PRE>
<P>
<PRE> sub processEntry {
   my $entry = shift;
  
   $entry-&gt;dump();
 } 
</PRE>
<P>
<HR>
<H1><A NAME="DESCRIPTION">DESCRIPTION</A></H1>
<P>
Directory Service Markup Language (DSML) is the XML standard for
representing directory service information in XML.

<P>
At the moment this module only reads and writes DSML entry entities. It
cannot process any schema entities because schema entities are processed
differently than elements.

<P>
Eventually this module will be a full level 2 consumer and producer
enabling you to give you full DSML conformance.

<P>
The module uses callbacks to improve performance (at least the appearance
of improving performance ;) and to reduce the amount of memory required to
parse large DSML files. Every time a single entry or schema is processed we
pass the Net::LDAP object (either an Entry or Schema object) to the
callback routine.

<P>
<HR>
<H1><A NAME="AUTHOR">AUTHOR</A></H1>
<P>
Mark Wilcox <A HREF="mailto:mark@mwjilcox.com">mark@mwjilcox.com</A>

<P>
<HR>
<H1><A NAME="SEE_ALSO">SEE ALSO</A></H1>
<P>
<A HREF="../../Net/LDAP.html">Net::LDAP</A>,
<A HREF="../../XML/Parser.html">XML::Parser</A>



<P>
<HR>
<H1><A NAME="COPYRIGHT">COPYRIGHT</A></H1>
<P>
Copyright (c) 2000 Graham Barr and Mark Wilcox. All rights reserved. This
program is free software; you can redistribute it and/or modify it under
the same terms as Perl itself.

</BODY>

</HTML>
